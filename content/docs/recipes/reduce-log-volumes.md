---
weight: 1
---
# Use Dynamic Filtration to Reduce Log Volumes

As they run, services generate log data to provide visibility into whatâ€™s happening. Log data can include anything from benign informational messages to full-blown errors. You want to know about errors, but too many informational messages can become costly and distracting noise.

With this recipe, you'll learn how to use MDAI to filter out unnecessary log lines. First, lets set up the log generators and generate log data.

Before you start, make sure that your [dependencies are installed](/docs/installation) and the MDAI Smart Hub is running.

## Start the Loggers

Use the MDAI installation script to deploy three different types of synthetic log generators: normal, noisy, and excessively noisy. The *noisy* logs are the ones that should be dropped.

Run the script from the root directory of the `mdai-labs` repo you cloned.

```
./mdai-kind.sh logs
```

Verify that the log generators are running.

```
kubectl get pods -n mdai -l app.kubernetes.io/part-of=mdai-log-generator
```

You should see output similar to the following.

```
NAME                                  READY   STATUS    RESTARTS   AGE
mdai-logger-d8bb6f897-2q8dn           1/1     Running   0          10m
mdai-logger-d8bb6f897-6pmhl           1/1     Running   0          10m
mdai-logger-d8bb6f897-x8f2j           1/1     Running   0          10m
mdai-logger-noisy-77fcbf8b9f-bfbs4    1/1     Running   0          10m
mdai-logger-noisy-77fcbf8b9f-gh67h    1/1     Running   0          10m
mdai-logger-noisy-77fcbf8b9f-srs6b    1/1     Running   0          10m
mdai-logger-xnoisy-686cb6465f-2pccp   1/1     Running   0          10
mdai-logger-xnoisy-686cb6465f-6kl9c   1/1     Running   0          10m
mdai-logger-xnoisy-686cb6465f-gnjmv   1/1     Running   0          10m
```

Verify that the logs are being generated by running the `kubectl logs` command with any one of the pods.

```
kubectl logs -n mdai {pod name}
```

For example, running the command with one of the noisy log generators should show a variety of log levels.

```
2025-08-29T03:59:10+00:00 - service1234 - teamA - us-east-1 - INFO - The algorithm successfully executed, triggering neural pathways and producing a burst of optimized data streams.
2025-08-29T03:59:10+00:00 - service1234 - teamA - us-east-1 - ERROR - The algorithm successfully executed, triggering neural pathways and producing a burst of optimized data streams.
2025-08-29T03:59:10+00:00 - service1234 - teamA - us-east-1 - ERROR - The algorithm successfully executed, triggering neural pathways and producing a burst of optimized data streams.
2025-08-29T03:59:10+00:00 - service1234 - teamA - us-east-1 - INFO - The algorithm successfully executed, triggering neural pathways and producing a burst of optimized data streams.
2025-08-29T03:59:10+00:00 - service1234 - teamA - us-east-1 - WARNING - The algorithm successfully executed, triggering neural pathways and producing a burst of optimized data streams.
2025-08-29T03:59:11+00:00 - service1234 - teamA - us-east-1 - ERROR - The algorithm successfully executed, triggering neural pathways and producing a burst of optimized data streams.
2025-08-29T03:59:11+00:00 - service1234 - teamA - us-east-1 - INFO - The algorithm successfully executed, triggering neural pathways and producing a burst of optimized data streams.
2025-08-29T03:59:11+00:00 - service1234 - teamA - us-east-1 - WARNING - The algorithm successfully executed, triggering neural pathways and producing a burst of optimized data streams.
2025-08-29T03:59:11+00:00 - service1234 - teamA - us-east-1 - ERROR - The algorithm successfully executed, triggering neural pathways and producing a burst of optimized data streams.
2025-08-29T03:59:11+00:00 - service1234 - teamA - us-east-1 - INFO - The algorithm successfully executed, triggering neural pathways and producing a burst of optimized data streams.
2025-08-29T03:59:11+00:00 - service1234 - teamA - us-east-1 - INFO - The algorithm successfully executed, triggering neural pathways and producing a burst of optimized data streams.
2025-08-29T03:59:11+00:00 - service1234 - teamA - us-east-1 - INFO - The algorithm successfully executed, triggering neural pathways and producing a burst of optimized data streams.
2025-08-29T03:59:11+00:00 - service1234 - teamA - us-east-1 - INFO - The algorithm successfully executed, triggering neural pathways and producing a burst of optimized data streams.
2025-08-29T03:59:11+00:00 - service1234 - teamA - us-east-1 - WARNING - The algorithm successfully executed, triggering neural pathways and producing a burst of optimized data streams.
2025-08-29T03:59:11+00:00 - service1234 - teamA - us-east-1 - ERROR - The algorithm successfully executed, triggering neural pathways and producing a burst of optimized data streams.
2025-08-29T03:59:11+00:00 - service1234 - teamA - us-east-1 - WARNING - The algorithm successfully executed, triggering neural pathways and producing a burst of optimized data streams.
2025-08-29T03:59:11+00:00 - service1234 - teamA - us-east-1 - WARNING - The algorithm successfully executed, triggering neural pathways and producing a burst of optimized data streams.
```

> [!TIP]
> If you installed K9s, you can use it to observe the logs. To launch the K9s application, enter `k9s` in the terminal window where you launched the cluster (for the correct context). Use the arrow keys to select one of the log generators, then press **l** (lowercase letter l). Press **ESC** to exit the log window. 

## Start a Collector

An OpenTelemetry collector is a component that receives and forwards telemetry data. Start the collector.

```
./mdai-kind.sh collector
```

You can verify that the collector is running with this command.

```
kubectl -n mdai get pods --selector app.kubernetes.io/name=gateway-collector
```

## Forward the Logs

To forward the logs to the collector, install and deploy Fluentd.

```
./mdai-kind.sh fluentd
```

You can verify that Fluentd is running with this command.

```
kubectl get pods
```

Look at the Fluentd logs, which should indicate that various pod log files are being accessed.

```
kubectl logs svc/fluent-fluentd
```

You should see log lines similar to the following.

```
2025-08-29 17:59:46.781871047 +0000 kubernetes.var.log.containers.mdai-logger-noisy-77fcbf8b9f-gh67h_mdai_mdai-logger-noisy-1b620238a587bd3d74d7df3510885cb6088c084643d0c199d9cb62c1833a699a.log: {"timestamp":"2025-08-29T17:59:46+00:00","mdai_service":"service1234","team":"teamA","region":"us-east-1","level":"ERROR","message":"The algorithm successfully executed, triggering neural pathways and producing a burst of optimized data streams."}
2025-08-29 17:59:46.781877089 +0000 kubernetes.var.log.containers.mdai-logger-noisy-77fcbf8b9f-gh67h_mdai_mdai-logger-noisy-1b620238a587bd3d74d7df3510885cb6088c084643d0c199d9cb62c1833a699a.log: {"timestamp":"2025-08-29T17:59:46+00:00","mdai_service":"service1234","team":"teamA","region":"us-east-1","level":"WARNING","message":"The algorithm successfully executed, triggering neural pathways and producing a burst of optimized data streams."}
2025-08-29 17:59:46.781879797 +0000 kubernetes.var.log.containers.mdai-logger-noisy-77fcbf8b9f-gh67h_mdai_mdai-logger-noisy-1b620238a587bd3d74d7df3510885cb6088c084643d0c199d9cb62c1833a699a.log: {"timestamp":"2025-08-29T17:59:46+00:00","mdai_service":"service1234","team":"teamA","region":"us-east-1","level":"INFO","message":"The algorithm successfully executed, triggering neural pathways and producing a burst of optimized data streams."}
2025-08-29 17:59:46.781882672 +0000 kubernetes.var.log.containers.mdai-logger-noisy-77fcbf8b9f-gh67h_mdai_mdai-logger-noisy-1b620238a587bd3d74d7df3510885cb6088c084643d0c199d9cb62c1833a699a.log: {"timestamp":"2025-08-29T17:59:46+00:00","mdai_service":"service1234","team":"teamA","region":"us-east-1","level":"ERROR","message":"The algorithm successfully executed, triggering neural pathways and producing a burst of optimized data streams."}
2025-08-29 17:59:46.781887339 +0000 kubernetes.var.log.containers.mdai-logger-noisy-77fcbf8b9f-gh67h_mdai_mdai-logger-noisy-1b620238a587bd3d74d7df3510885cb6088c084643d0c199d9cb62c1833a699a.log: {"timestamp":"2025-08-29T17:59:46+00:00","mdai_service":"service1234","team":"teamA","region":"us-east-1","level":"ERROR","message":"The algorithm successfully executed, triggering neural pathways and producing a burst of optimized data streams."}
2025-08-29 17:59:46.781894339 +0000 kubernetes.var.log.containers.mdai-logger-noisy-77fcbf8b9f-gh67h_mdai_mdai-logger-noisy-1b620238a587bd3d74d7df3510885cb6088c084643d0c199d9cb62c1833a699a.log: {"timestamp":"2025-08-29T17:59:46+00:00","mdai_service":"service1234","team":"teamA","region":"us-east-1","level":"INFO","message":"The algorithm successfully executed, triggering neural pathways and producing a burst of optimized data streams."
```




##### Advanced setup (Hungry for more?)
Power up MDAI with these other relevant recipes
- [Relevant link to advanced]()
- [Maybe another relevant link to use case]() 
